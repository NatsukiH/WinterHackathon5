<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>加速度の値を得る</title>
</head>
 
<body>
<button id="start-button">Click</button>
<div id="txt">ここにデータを表示</div>             <!-- データを表示するdiv要素 -->
 
<script>
    var txt = document.getElementById("txt");
    const requestDeviceMotionPermission = () => {
  if (
    DeviceMotionEvent &&
    typeof DeviceMotionEvent.requestPermission === 'function'
  ) {
    // iOS 13+ の Safari
    // 許可を取得
    DeviceMotionEvent.requestPermission()
    .then(permissionState => {
      if (permissionState === 'granted') {
        // 許可を得られた場合、devicemotionをイベントリスナーに追加
        window.addEventListener('devicemotion', e => {
          // devicemotionのイベント処理
            aX = e.accelerationIncludingGravity.x;
            aY = e.accelerationIncludingGravity.y;
            aZ = e.accelerationIncludingGravity.z;
            txt.innerHTML = "x: " + aX + "<br>"         // x軸の値
                  + "y: " + aY + "<br>"         // y軸の値
                  + "z: " + aZ;                 // z軸の値
        })
      } else {
        // 許可を得られなかった場合の処理
        txt.innerHTML = "許可を得られなかった場合"
      }
    })
    .catch(console.error) // https通信でない場合などで許可を取得できなかった場合
  } else {
    // 上記以外のブラウザ
    txt.innerHTML = "上記以外のブラウザ"
  }
}

// ボタンクリックでrequestDeviceMotionPermission実行
const startButton = document.getElementById("start-button")
startButton.addEventListener('click', requestDeviceMotionPermission, false)
</script>
 
</body>
</html>